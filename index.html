<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PMæˆ°é¬¥åŠ›è©•ä¼°ç³»çµ±</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Noto+Sans+TC:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --primary: #4a9eff;
            --secondary: #64b5f6;
            --bg-dark: #1a1d29;
            --surface: #252936;
            --elevated: #2f3444;
            --text-primary: #e8eaf0;
            --text-secondary: #9ba3b4;
            --success: #52c41a;
            --warning: #faad14;
            --danger: #f5222d;
        }

        body {
            font-family: 'Noto Sans TC', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                linear-gradient(90deg, rgba(74, 158, 255, 0.03) 1px, transparent 1px),
                linear-gradient(rgba(74, 158, 255, 0.03) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: gridMove 20s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(30px, 30px); }
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .header {
            text-align: center;
            padding: 20px 15px;
            background: linear-gradient(135deg, var(--surface), var(--elevated));
            border-radius: 15px;
            border: 2px solid var(--primary);
            box-shadow: 0 0 30px rgba(74, 158, 255, 0.3);
            margin-bottom: 15px;
        }

        h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(1.5rem, 6vw, 2.5rem);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .subtitle {
            font-family: 'Orbitron', sans-serif;
            color: var(--text-secondary);
            font-size: clamp(0.7rem, 2.5vw, 0.9rem);
            letter-spacing: 2px;
        }

        /* æ­¥é©ŸæŒ‡ç¤ºå™¨ */
        .steps {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .step {
            flex: 1;
            text-align: center;
            padding: 10px 5px;
            background: var(--surface);
            border: 2px solid var(--elevated);
            border-radius: 10px;
            margin: 0 3px;
            transition: all 0.3s;
            font-size: clamp(0.7rem, 2.5vw, 0.85rem);
        }

        .step.active {
            border-color: var(--primary);
            background: linear-gradient(135deg, rgba(74, 158, 255, 0.2), rgba(100, 181, 246, 0.1));
            color: var(--primary);
            font-weight: 700;
        }

        .step.completed {
            border-color: var(--success);
            background: rgba(82, 196, 26, 0.1);
            color: var(--success);
        }

        /* å€å¡Š */
        .section {
            background: var(--surface);
            border-radius: 15px;
            border: 2px solid var(--elevated);
            padding: 20px 15px;
            margin-bottom: 15px;
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            font-size: clamp(1.2rem, 4vw, 1.5rem);
            margin-bottom: 15px;
            text-align: center;
        }

        /* è¼¸å…¥æ¡† */
        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .input-group input[type="text"] {
            width: 100%;
            padding: 14px 16px;
            background: var(--bg-dark);
            border: 2px solid var(--elevated);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-group input[type="text"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 15px rgba(74, 158, 255, 0.3);
        }

        /* è­‰ç…§é¸æ“‡ */
        .cert-category {
            margin-bottom: 20px;
        }

        .cert-category h3 {
            color: var(--primary);
            font-size: 1rem;
            margin-bottom: 10px;
            padding-left: 5px;
            border-left: 3px solid var(--primary);
        }

        .cert-item {
            background: var(--bg-dark);
            border: 2px solid var(--elevated);
            border-radius: 10px;
            padding: 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: flex-start;
            gap: 12px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .cert-item:active {
            transform: scale(0.98);
        }

        .cert-item.selected {
            border-color: var(--success);
            background: linear-gradient(135deg, rgba(82, 196, 26, 0.15), rgba(82, 196, 26, 0.05));
        }

        .cert-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }

        .cert-info {
            flex: 1;
        }

        .cert-name-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .cert-name {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .cert-bonus {
            color: var(--success);
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 0.85rem;
        }

        .cert-desc {
            color: var(--text-secondary);
            font-size: 0.8rem;
            line-height: 1.4;
        }

        .cert-summary {
            background: linear-gradient(135deg, rgba(82, 196, 26, 0.1), rgba(82, 196, 26, 0.05));
            border: 2px solid var(--success);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            text-align: center;
        }

        .cert-summary h4 {
            color: var(--success);
            margin-bottom: 10px;
            font-size: 1rem;
        }

        .total-bonus {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            color: var(--success);
            font-weight: 900;
        }

        /* è©•åˆ†å€åŸŸ */
        .category-block {
            background: var(--bg-dark);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--elevated);
        }

        .category-block h3 {
            color: var(--primary);
            font-size: 1.1rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--elevated);
        }

        .indicator-item {
            margin-bottom: 18px;
            padding: 12px;
            background: var(--surface);
            border-radius: 10px;
            border-left: 3px solid var(--primary);
        }

        .indicator-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
            gap: 8px;
        }

        .indicator-name {
            flex: 1;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .info-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--primary);
            color: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.85rem;
            cursor: pointer;
            flex-shrink: 0;
            transition: all 0.3s;
        }

        .info-icon:active {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(74, 158, 255, 0.5);
        }

        .indicator-desc {
            background: rgba(74, 158, 255, 0.1);
            border: 1px solid var(--primary);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 0.85rem;
            line-height: 1.5;
            color: var(--text-secondary);
            display: none;
        }

        .indicator-desc.show {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 200px; }
        }

        .score-buttons {
            display: flex;
            gap: 6px;
            justify-content: center;
        }

        .score-btn {
            width: 48px;
            height: 48px;
            border: 2px solid var(--elevated);
            background: var(--elevated);
            color: var(--text-secondary);
            border-radius: 10px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
        }

        .score-btn:active {
            transform: scale(0.95);
        }

        .score-btn.active {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        .score-btn[data-score="1"].active {
            background: linear-gradient(135deg, #ff5252, #ff1744);
            border-color: #ff5252;
            color: white;
        }

        .score-btn[data-score="2"].active {
            background: linear-gradient(135deg, #ffab40, #ff9100);
            border-color: #ffab40;
            color: white;
        }

        .score-btn[data-score="3"].active {
            background: linear-gradient(135deg, #ffee58, #ffd600);
            border-color: #ffee58;
            color: #1a1d29;
        }

        .score-btn[data-score="4"].active {
            background: linear-gradient(135deg, #66bb6a, #4caf50);
            border-color: #66bb6a;
            color: white;
        }

        .score-btn[data-score="5"].active {
            background: linear-gradient(135deg, #00e676, #00c853);
            border-color: #00e676;
            color: white;
        }

        /* è©•åˆ†æ¨™æº–èªªæ˜ */
        .score-guide {
            background: linear-gradient(135deg, rgba(74, 158, 255, 0.1), rgba(100, 181, 246, 0.05));
            border: 2px solid var(--primary);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .score-guide h4 {
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 12px;
            font-size: 1rem;
        }

        .score-guide-items {
            display: flex;
            justify-content: space-around;
            gap: 5px;
        }

        .score-guide-item {
            padding: 8px 6px;
            border-radius: 8px;
            font-size: 0.75rem;
            min-width: 50px;
        }

        .score-guide-item .number {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 2px;
        }

        .guide-1 { background: rgba(255, 82, 82, 0.2); border: 1px solid #ff5252; }
        .guide-1 .number { color: #ff5252; }

        .guide-2 { background: rgba(255, 171, 64, 0.2); border: 1px solid #ffab40; }
        .guide-2 .number { color: #ffab40; }

        .guide-3 { background: rgba(255, 238, 88, 0.2); border: 1px solid #ffee58; }
        .guide-3 .number { color: #ffee58; }

        .guide-4 { background: rgba(102, 187, 106, 0.2); border: 1px solid #66bb6a; }
        .guide-4 .number { color: #66bb6a; }

        .guide-5 { background: rgba(0, 230, 118, 0.2); border: 1px solid #00e676; }
        .guide-5 .number { color: #00e676; }

        /* çµæœé¡¯ç¤º */
        .result-score {
            text-align: center;
            padding: 25px 15px;
            background: linear-gradient(135deg, var(--bg-dark), var(--elevated));
            border-radius: 15px;
            border: 2px solid var(--primary);
            margin-bottom: 20px;
        }

        .result-score .label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .result-score .value {
            font-family: 'Orbitron', sans-serif;
            font-size: clamp(3rem, 12vw, 4.5rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1;
            margin-bottom: 10px;
        }

        .level-badge {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--warning), #ffc53d);
            color: var(--bg-dark);
            border-radius: 25px;
            font-weight: 700;
            font-size: 1rem;
        }

        .chart-container {
            position: relative;
            width: 100%;
            height: 300px;
            margin: 20px 0;
            padding: 10px;
            background: var(--bg-dark);
            border-radius: 15px;
        }

        .chart-container canvas {
            max-width: 100%;
            height: auto !important;
        }

        /* æŒ‰éˆ• */
        .btn {
            width: 100%;
            padding: 16px;
            border: none;
            border-radius: 12px;
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            font-size: clamp(0.9rem, 3vw, 1rem);
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--bg-dark);
            box-shadow: 0 0 20px rgba(74, 158, 255, 0.4);
        }

        .btn-primary:active {
            transform: translateY(2px);
            box-shadow: 0 0 15px rgba(74, 158, 255, 0.6);
        }

        .btn-secondary {
            background: var(--elevated);
            color: var(--text-primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:active {
            background: var(--bg-dark);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #73d13d);
            color: white;
            box-shadow: 0 0 20px rgba(82, 196, 26, 0.4);
        }

        .btn-success:active {
            transform: translateY(2px);
        }

        .btn-danger {
            background: var(--elevated);
            color: var(--danger);
            border: 2px solid var(--danger);
        }

        .button-group {
            display: flex;
            gap: 10px;
        }

        .button-group .btn {
            flex: 1;
            margin-bottom: 0;
        }

        /* æç¤ºæ–‡å­— */
        .hint {
            text-align: center;
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin: 15px 0;
            line-height: 1.5;
        }

        /* éš±è— */
        .hidden {
            display: none !important;
        }

        /* è¼‰å…¥å‹•ç•« */
        .loading {
            text-align: center;
            padding: 30px;
            color: var(--primary);
            font-family: 'Orbitron', sans-serif;
        }

        .loading::after {
            content: '...';
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        /* éŸ¿æ‡‰å¼ */
        @media (max-width: 480px) {
            .score-btn {
                width: 44px;
                height: 44px;
                font-size: 1.1rem;
            }

            .score-guide-items {
                gap: 3px;
            }

            .score-guide-item {
                padding: 6px 4px;
                min-width: 45px;
            }
        }

        @media (max-width: 360px) {
            .score-btn {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>PM POWER</h1>
            <p class="subtitle">æˆ°é¬¥åŠ›è©•ä¼°ç³»çµ±</p>
        </div>

        <!-- æ­¥é©ŸæŒ‡ç¤ºå™¨ -->
        <div class="steps">
            <div class="step active" id="step1">1.å§“å</div>
            <div class="step" id="step2">2.è­‰ç…§</div>
            <div class="step" id="step3">3.è©•åˆ†</div>
            <div class="step" id="step4">4.çµæœ</div>
        </div>

        <!-- æ­¥é©Ÿ 1: è¼¸å…¥å§“å -->
        <div class="section active" id="section1">
            <h2 class="section-title">ğŸ‘¤ è©•ä¼°å°è±¡</h2>
            <div class="input-group">
                <label>è«‹è¼¸å…¥å—è©•ä¼°è€…å§“å</label>
                <input type="text" id="personName" placeholder="ä¾‹å¦‚ï¼šç‹å°æ˜">
            </div>
            <p class="hint">ğŸ’¡ è¼¸å…¥å§“åå¾Œï¼Œé–‹å§‹é€²è¡Œèƒ½åŠ›è©•ä¼°</p>
            <button class="btn btn-primary" onclick="goToStep(2)">ä¸‹ä¸€æ­¥ â†’</button>
        </div>

        <!-- æ­¥é©Ÿ 2: é¸æ“‡è­‰ç…§ -->
        <div class="section" id="section2">
            <h2 class="section-title">ğŸ† å°ˆæ¥­è­‰ç…§</h2>
            <p class="hint">è«‹é¸æ“‡å·²å–å¾—çš„å°ˆæ¥­è­‰ç…§ï¼ˆå¯è¤‡é¸ï¼‰</p>
            
            <div id="certificationList"></div>

            <div class="cert-summary" id="certSummary" style="display:none;">
                <h4>âœ… å·²é¸æ“‡è­‰ç…§</h4>
                <div id="selectedCertsList"></div>
                <div class="total-bonus" id="totalBonus">+0 åˆ†</div>
            </div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="goToStep(1)">â† ä¸Šä¸€æ­¥</button>
                <button class="btn btn-primary" onclick="goToStep(3)">ä¸‹ä¸€æ­¥ â†’</button>
            </div>
        </div>

        <!-- æ­¥é©Ÿ 3: èƒ½åŠ›è©•åˆ† -->
        <div class="section" id="section3">
            <h2 class="section-title">ğŸ“Š èƒ½åŠ›è©•ä¼°</h2>
            
            <div class="score-guide">
                <h4>è©•åˆ†æ¨™æº–</h4>
                <div class="score-guide-items">
                    <div class="score-guide-item guide-1">
                        <div class="number">1</div>
                        <div>å·®</div>
                    </div>
                    <div class="score-guide-item guide-2">
                        <div class="number">2</div>
                        <div>ä¸€èˆ¬</div>
                    </div>
                    <div class="score-guide-item guide-3">
                        <div class="number">3</div>
                        <div>å¥½</div>
                    </div>
                    <div class="score-guide-item guide-4">
                        <div class="number">4</div>
                        <div>å¾ˆå¥½</div>
                    </div>
                    <div class="score-guide-item guide-5">
                        <div class="number">5</div>
                        <div>éå¸¸å¥½</div>
                    </div>
                </div>
            </div>

            <p class="hint">ğŸ’¡ é»æ“Š <span style="color:var(--primary);">â“˜</span> åœ–ç¤ºæŸ¥çœ‹è©³ç´°èªªæ˜</p>

            <div id="assessmentCategories"></div>

            <div class="button-group">
                <button class="btn btn-secondary" onclick="goToStep(2)">â† ä¸Šä¸€æ­¥</button>
                <button class="btn btn-success" onclick="calculatePower()">ğŸš€ è¨ˆç®—æˆ°é¬¥åŠ›</button>
            </div>
        </div>

        <!-- æ­¥é©Ÿ 4: çµæœé¡¯ç¤º -->
        <div class="section" id="section4">
            <h2 class="section-title" id="resultTitle"></h2>
            
            <div class="result-score">
                <div class="label">ç¸½æˆ°é¬¥åŠ›</div>
                <div class="value" id="totalScore">0</div>
                <div class="level-badge" id="levelBadge">æœªè©•ä¼°</div>
            </div>

            <div class="chart-container">
                <canvas id="radarChart"></canvas>
            </div>

            <button class="btn btn-primary" onclick="downloadReport()">ğŸ“¥ åŒ¯å‡ºè©³ç´°å ±å‘Š</button>
            <button class="btn btn-secondary" onclick="viewDetails()">ğŸ“Š æŸ¥çœ‹è©³ç´°åˆ†æ</button>
            <button class="btn btn-danger" onclick="resetAssessment()">ğŸ”„ é‡æ–°è©•ä¼°</button>
        </div>
    </div>

    <script>
        // è³‡æ–™çµæ§‹
        const categories = [
            {
                name: 'æºé€šåŠ›',
                weight: 30,
                indicators: [
                    { name: 'åˆ©å®³é—œä¿‚äººæºé€š', description: 'èƒ½è­˜åˆ¥ä¸¦æœ‰æ•ˆç®¡ç†å°ˆæ¡ˆåˆ©å®³é—œä¿‚äººæœŸæœ›ï¼Œé‹ç”¨é©ç•¶çš„æºé€šç­–ç•¥èˆ‡é »ç‡ï¼Œç¢ºä¿è³‡è¨Šé€æ˜åº¦èˆ‡åƒèˆ‡åº¦ã€‚ç¬¦åˆPMPæºé€šç®¡ç†çŸ¥è­˜é ˜åŸŸã€‚' },
                    { name: 'åœ˜éšŠæºé€šå”èª¿', description: 'å»ºç«‹æœ‰æ•ˆçš„åœ˜éšŠæºé€šæ©Ÿåˆ¶ï¼Œä¿ƒé€²è·¨è·èƒ½å”ä½œï¼Œç¢ºä¿åœ˜éšŠæˆå“¡ç†è§£ç›®æ¨™ã€ä»»å‹™èˆ‡è²¬ä»»åˆ†å·¥ã€‚' },
                    { name: 'æœƒè­°ç®¡ç†', description: 'èƒ½è¦åŠƒèˆ‡ä¸»æŒé«˜æ•ˆæœƒè­°ï¼Œåˆ¶å®šè­°ç¨‹ã€æŒæ§æ™‚é–“ã€å¼•å°è¨è«–ã€è¨˜éŒ„æ±ºè­°ä¸¦è¿½è¹¤è¡Œå‹•é …ç›®ã€‚' },
                    { name: 'è¡çªç®¡ç†', description: 'è­˜åˆ¥æ½›åœ¨è¡çªä¸¦æ¡å–é©ç•¶ç­–ç•¥ï¼ˆå¦¥å”ã€åˆä½œã€è¿´é¿ç­‰ï¼‰è§£æ±ºåœ˜éšŠæˆ–åˆ©å®³é—œä¿‚äººé–“çš„åˆ†æ­§ï¼Œç¶­æŒå°ˆæ¡ˆé€²åº¦ã€‚' },
                    { name: 'è³‡è¨Šåˆ†äº«èˆ‡å ±å‘Š', description: 'å®šæœŸç”¢å‡ºæ¸…æ™°ã€æº–ç¢ºçš„å°ˆæ¡ˆå ±å‘Šï¼ŒåŒ…å«é€²åº¦ã€é¢¨éšªã€è­°é¡Œç­‰é—œéµè³‡è¨Šï¼Œç¢ºä¿åˆ©å®³é—œä¿‚äººæŒæ¡å°ˆæ¡ˆç‹€æ…‹ã€‚' }
                ]
            },
            {
                name: 'æŠ€è¡“åŠ›',
                weight: 20,
                indicators: [
                    { name: 'å½±åƒç³»çµ±', description: 'å…·å‚™å½±åƒç›£æ§ã€è¦–è¨Šæœƒè­°ã€æ•¸ä½çœ‹æ¿ç­‰ç³»çµ±çš„è¨­è¨ˆã€å®‰è£ã€æ•´åˆèˆ‡æ•…éšœæ’é™¤èƒ½åŠ›ã€‚' },
                    { name: 'ç¶²è·¯ç³»çµ±', description: 'ç†Ÿæ‚‰ç¶²è·¯æ¶æ§‹è¦åŠƒã€VLANé…ç½®ã€IPç®¡ç†ã€QoSè¨­å®šã€ç¶²è·¯å®‰å…¨èˆ‡å‚™æ´æ©Ÿåˆ¶è¨­è¨ˆã€‚' },
                    { name: 'è²éŸ³ç³»çµ±', description: 'æŒæ¡éŸ³éŸ¿æ“´è²ã€æœƒè­°éŸ³è¨Šã€èƒŒæ™¯éŸ³æ¨‚ç­‰ç³»çµ±çš„è¨­è¨ˆã€èª¿æ ¡èˆ‡æ•´åˆèƒ½åŠ›ï¼ŒåŒ…å«EQã€å»¶é²ã€è¿´æˆè™•ç†ã€‚' },
                    { name: 'ç’°æ§/BA', description: 'äº†è§£æ¨“å®‡è‡ªå‹•åŒ–ç³»çµ±ã€ç’°å¢ƒç›£æ§ã€HVACæ§åˆ¶ã€ç…§æ˜æ§åˆ¶èˆ‡èƒ½æºç®¡ç†ç³»çµ±çš„æ•´åˆèˆ‡ç¨‹å¼é‚è¼¯ã€‚' },
                    { name: 'è·¨ç³»çµ±é™¤éŒ¯', description: 'å…·å‚™ç³»çµ±æ€§å•é¡Œåˆ†æèƒ½åŠ›ï¼Œèƒ½å¿«é€Ÿå®šä½è·¨ç³»çµ±æ•´åˆå•é¡Œï¼Œé–±è®€Logã€è¿½è¹¤è¨Šè™Ÿæµä¸¦æå‡ºè§£æ±ºæ–¹æ¡ˆã€‚' }
                ]
            },
            {
                name: 'åŸ·è¡Œèˆ‡ç®¡æ§åŠ›',
                weight: 15,
                indicators: [
                    { name: 'é€²åº¦è¿½è¹¤', description: 'é‹ç”¨é€²åº¦ç®¡ç†å·¥å…·ç›£æ§å°ˆæ¡ˆé‡Œç¨‹ç¢‘èˆ‡é—œéµè·¯å¾‘ï¼ŒåŠæ™‚ç™¼ç¾åå·®ä¸¦æ¡å–ç³¾æ­£æªæ–½ã€‚ç¬¦åˆPMPé€²åº¦ç®¡ç†ã€‚' },
                    { name: 'æˆæœ¬é è­¦', description: 'ç›£æ§å°ˆæ¡ˆé ç®—åŸ·è¡Œç‹€æ³ï¼Œä½¿ç”¨EVMï¼ˆå¯¦ç²å€¼ç®¡ç†ï¼‰ç­‰æ–¹æ³•é æ¸¬æˆæœ¬åå·®ï¼Œæå‰é è­¦è¶…æ”¯é¢¨éšªã€‚' },
                    { name: 'å“è³ªç®¡æ§', description: 'å»ºç«‹å“è³ªæ¨™æº–èˆ‡æŸ¥æ ¸æ©Ÿåˆ¶ï¼ŒåŸ·è¡Œéç¨‹ç¨½æ ¸èˆ‡æ¸¬è©¦é©—æ”¶ï¼Œç¢ºä¿äº¤ä»˜æˆæœç¬¦åˆè¦æ ¼è¦æ±‚ã€‚ç¬¦åˆPMPå“è³ªç®¡ç†ã€‚' },
                    { name: 'è®Šæ›´è™•ç†', description: 'ä¾å¾ªè®Šæ›´ç®¡ç†æµç¨‹ï¼Œè©•ä¼°è®Šæ›´å½±éŸ¿ï¼ˆç¯„ç–‡ã€æ™‚ç¨‹ã€æˆæœ¬ï¼‰ï¼Œè¨˜éŒ„ä¸¦è¿½è¹¤è®Šæ›´åŸ·è¡Œç‹€æ³ã€‚' },
                    { name: 'å±æ©Ÿæ‡‰è®Š', description: 'é¢å°çªç™¼ç‹€æ³èƒ½è¿…é€Ÿè©•ä¼°å½±éŸ¿ã€å•Ÿå‹•æ‡‰è®Šè¨ˆç•«ã€å”èª¿è³‡æºï¼Œåœ¨å£“åŠ›ä¸‹åšå‡ºæœ‰æ•ˆæ±ºç­–ã€‚' }
                ]
            },
            {
                name: 'é ˜å°åŠ›',
                weight: 15,
                indicators: [
                    { name: 'å¸¶äººæ„é¡˜', description: 'é¡˜æ„åŸ¹é¤Šåœ˜éšŠæˆå“¡ã€åˆ†äº«çŸ¥è­˜ï¼Œèƒ½æ¿€å‹µå£«æ°£ä¸¦å»ºç«‹åœ˜éšŠå‘å¿ƒåŠ›ï¼Œè®“æˆå“¡é¡˜æ„è¿½éš¨ä¸¦æŠ•å…¥å°ˆæ¡ˆã€‚' },
                    { name: 'è³‡æºçˆ­å–', description: 'èƒ½å‘ä¸Šçˆ­å–å°ˆæ¡ˆæ‰€éœ€çš„äººåŠ›ã€è¨­å‚™èˆ‡é ç®—è³‡æºï¼Œå–„æ–¼æºé€šè³‡æºéœ€æ±‚çš„åˆç†æ€§èˆ‡ç·Šæ€¥æ€§ã€‚' },
                    { name: 'æ±ºç­–æœæ–·', description: 'åœ¨è³‡è¨Šä¸å®Œæ•´çš„æƒ…æ³ä¸‹ï¼Œèƒ½è©•ä¼°é¢¨éšªä¸¦åšå‡ºåŠæ™‚æ±ºç­–ï¼Œæ‰¿æ“”æ±ºç­–è²¬ä»»ï¼Œé¿å…å°ˆæ¡ˆåœæ»¯ã€‚' },
                    { name: 'è¡çªè§£æ±º', description: 'é‹ç”¨è«‡åˆ¤èˆ‡èª¿è§£æŠ€å·§ï¼Œå¹³è¡¡å„æ–¹åˆ©ç›Šï¼ŒåŒ–è§£åœ˜éšŠå…§éƒ¨æˆ–è·¨éƒ¨é–€è¡çªï¼Œç¶­æŒåˆä½œé—œä¿‚ã€‚' },
                    { name: 'åŸ¹é¤Šä¸‹å±¬', description: 'ä¸»å‹•æŒ‡å°èˆ‡åŸ¹è‚²åœ˜éšŠæˆå“¡ï¼Œå»ºç«‹çŸ¥è­˜å‚³æ‰¿æ©Ÿåˆ¶ï¼Œå”åŠ©æˆå“¡è·æ¶¯ç™¼å±•ï¼Œæ‰“é€ é«˜æ•ˆèƒ½åœ˜éšŠã€‚' }
                ]
            },
            {
                name: 'è¦åŠƒåŠ›',
                weight: 15,
                indicators: [
                    { name: 'WBSæ™‚ç¨‹', description: 'èƒ½å»ºç«‹å®Œæ•´çš„å·¥ä½œåˆ†è§£çµæ§‹ï¼ˆWBSï¼‰ï¼Œåˆ¶å®šåˆç†çš„æ™‚ç¨‹è¦åŠƒï¼Œé‹ç”¨P6æˆ–MS Projectç­‰å·¥å…·é€²è¡Œæ’ç¨‹ã€‚ç¬¦åˆPMPç¯„ç–‡èˆ‡æ™‚ç¨‹ç®¡ç†ã€‚' },
                    { name: 'è³‡æºé æ¸¬', description: 'æº–ç¢ºé ä¼°å°ˆæ¡ˆæ‰€éœ€äººåŠ›ã€ç‰©æ–™èˆ‡è¨­å‚™ï¼Œç¹ªè£½è³‡æºè² è·æ›²ç·šï¼Œé¿å…è³‡æºè¡çªèˆ‡ç“¶é ¸ã€‚' },
                    { name: 'é¢¨éšªè­˜åˆ¥', description: 'ä¸»å‹•è­˜åˆ¥å°ˆæ¡ˆé¢¨éšªï¼Œå»ºç«‹é¢¨éšªç™»éŒ„è¡¨ï¼ˆRisk Registerï¼‰ï¼Œè©•ä¼°æ©Ÿç‡èˆ‡å½±éŸ¿ï¼Œåˆ¶å®šæ‡‰å°ç­–ç•¥ã€‚ç¬¦åˆPMPé¢¨éšªç®¡ç†ã€‚' },
                    { name: 'é—œéµè·¯å¾‘', description: 'è­˜åˆ¥ä¸¦åš´å¯†ç›£æ§å°ˆæ¡ˆé—œéµè·¯å¾‘ï¼ŒæŒæ¡æµ®æ™‚ï¼ˆFloatï¼‰æ¦‚å¿µï¼Œå„ªå…ˆç®¡æ§å½±éŸ¿å°ˆæ¡ˆäº¤æœŸçš„é—œéµä»»å‹™ã€‚' }
                ]
            },
            {
                name: 'å•†æ¥­èˆ‡æˆæœ¬æ„è­˜',
                weight: 5,
                indicators: [
                    { name: 'å ±åƒ¹å¯©æ ¸', description: 'èƒ½å¯©æŸ¥ä¾›æ‡‰å•†å ±åƒ¹åˆç†æ€§ï¼Œé€²è¡Œæ¯”åƒ¹è­°åƒ¹ï¼Œåœ¨ç¶­æŒå“è³ªå‰æä¸‹çˆ­å–æœ€ä½³æ¡è³¼æ¢ä»¶ã€‚' },
                    { name: 'è®Šæ›´æ©Ÿæœƒ', description: 'è­˜åˆ¥å°ˆæ¡ˆè®Šæ›´ä¸­çš„ç´¢è³ æ©Ÿæœƒï¼Œä¾æ“šåˆç´„æ¢æ¬¾çˆ­å–åˆç†è£œå„Ÿï¼Œä¿è­·å…¬å¸æ¬Šç›Šã€‚' },
                    { name: 'åˆç´„æ¢æ¬¾', description: 'ç†Ÿæ‚‰å°ˆæ¡ˆåˆç´„é—œéµæ¢æ¬¾ï¼ˆä»˜æ¬¾ã€ç½°å‰‡ã€ä¿å›ºã€é©—æ”¶æ¨™æº–ï¼‰ï¼Œç¢ºä¿åŸ·è¡Œç¬¦åˆåˆç´„è¦æ±‚ã€‚' },
                    { name: 'æˆæœ¬å„ªåŒ–', description: 'ä¸»å‹•æå‡ºåƒ¹å€¼å·¥ç¨‹ï¼ˆVEï¼‰æˆ–åƒ¹å€¼åˆ†æï¼ˆVAï¼‰æ–¹æ¡ˆï¼Œåœ¨ä¸å½±éŸ¿åŠŸèƒ½å‰æä¸‹é™ä½å°ˆæ¡ˆæˆæœ¬ã€‚' }
                ]
            }
        ];

        const certifications = {
            projectManagement: {
                title: 'å°ˆæ¡ˆç®¡ç†è­‰ç…§',
                certs: [
                    { id: 'pmp', name: 'PMP', bonus: 10, description: 'å°ˆæ¡ˆç®¡ç†å¸«èªè­‰ï¼ŒPMIæœ€æ¬Šå¨çš„å°ˆæ¡ˆç®¡ç†è­‰ç…§' },
                    { id: 'capm', name: 'CAPM', bonus: 5, description: 'åŠ©ç†å°ˆæ¡ˆç®¡ç†å¸«ï¼Œé©åˆåˆéšPM' },
                    { id: 'prince2', name: 'PRINCE2', bonus: 8, description: 'è‹±åœ‹æ”¿åºœé–‹ç™¼çš„å°ˆæ¡ˆç®¡ç†æ–¹æ³•è«–è­‰ç…§' },
                    { id: 'pmi_acp', name: 'PMI-ACP', bonus: 8, description: 'æ•æ·å°ˆæ¡ˆç®¡ç†èªè­‰' },
                    { id: 'pmi_rmp', name: 'PMI-RMP', bonus: 6, description: 'é¢¨éšªç®¡ç†å°ˆæ¥­äººå£«' },
                    { id: 'pgmp', name: 'PgMP', bonus: 12, description: 'é …ç›®é›†ç®¡ç†å°ˆæ¥­äººå£«ï¼ˆé«˜éšï¼‰' }
                ]
            },
            networking: {
                title: 'ç¶²è·¯æŠ€è¡“è­‰ç…§',
                certs: [
                    { id: 'ccna', name: 'CCNA', bonus: 6, description: 'Ciscoç¶²è·¯å·¥ç¨‹å¸«èªè­‰ï¼ˆåŸºç¤ï¼‰' },
                    { id: 'ccnp', name: 'CCNP', bonus: 10, description: 'Ciscoç¶²è·¯å°ˆå®¶èªè­‰ï¼ˆé€²éšï¼‰' },
                    { id: 'ccie', name: 'CCIE', bonus: 15, description: 'Ciscoç¶²è·¯å°ˆå®¶èªè­‰ï¼ˆå°ˆå®¶ç´šï¼‰' },
                    { id: 'comptia_network', name: 'CompTIA Network+', bonus: 4, description: 'ç¶²è·¯åŸºç¤èªè­‰' }
                ]
            },
            security: {
                title: 'è³‡è¨Šå®‰å…¨è­‰ç…§',
                certs: [
                    { id: 'cissp', name: 'CISSP', bonus: 10, description: 'è³‡è¨Šç³»çµ±å®‰å…¨å°ˆå®¶' },
                    { id: 'ceh', name: 'CEH', bonus: 8, description: 'é“å¾·é§­å®¢èªè­‰' },
                    { id: 'comptia_security', name: 'CompTIA Security+', bonus: 5, description: 'è³‡å®‰åŸºç¤èªè­‰' }
                ]
            },
            audioVisual: {
                title: 'å½±éŸ³æ•´åˆè­‰ç…§',
                certs: [
                    { id: 'cts', name: 'CTS', bonus: 8, description: 'AVIXAå½±éŸ³æŠ€è¡“å°ˆå®¶' },
                    { id: 'cts_d', name: 'CTS-D', bonus: 10, description: 'AVIXAå½±éŸ³ç³»çµ±è¨­è¨ˆå°ˆå®¶' },
                    { id: 'cts_i', name: 'CTS-I', bonus: 10, description: 'AVIXAå½±éŸ³ç³»çµ±å®‰è£å°ˆå®¶' },
                    { id: 'dante_cert', name: 'Danteèªè­‰', bonus: 6, description: 'Danteæ•¸ä½éŸ³è¨Šç¶²è·¯èªè­‰' }
                ]
            },
            buildingAutomation: {
                title: 'æ§åˆ¶ç³»çµ±èªè­‰',
                certs: [
                    { id: 'amx_programmer', name: 'AMX Programmer', bonus: 8, description: 'AMXç³»çµ±ç¨‹å¼è¨­è¨ˆå¸«èªè­‰' },
                    { id: 'amx_designer', name: 'AMX Designer', bonus: 10, description: 'AMXç³»çµ±è¨­è¨ˆå¸«èªè­‰' },
                    { id: 'crestron_dmcp', name: 'Crestron DMCP', bonus: 8, description: 'Crestronæ•¸ä½åª’é«”èªè­‰ç¨‹å¼è¨­è¨ˆå¸«' },
                    { id: 'crestron_dtsp', name: 'Crestron DTSP', bonus: 10, description: 'Crestronæ•¸ä½æŠ€è¡“å°ˆå®¶ï¼ˆé€²éšï¼‰' },
                    { id: 'crestron_dmc', name: 'Crestron DMC', bonus: 12, description: 'Crestronå¤§å¸«ç´šèªè­‰ï¼ˆæœ€é«˜éšï¼‰' }
                ]
            },
            itGeneral: {
                title: 'è³‡è¨ŠæŠ€è¡“è­‰ç…§',
                certs: [
                    { id: 'comptia_a', name: 'CompTIA A+', bonus: 3, description: 'ITæŠ€è¡“äººå“¡åŸºç¤èªè­‰' },
                    { id: 'microsoft_azure', name: 'Microsoft Azure', bonus: 7, description: 'å¾®è»Ÿé›²ç«¯å¹³å°èªè­‰' },
                    { id: 'aws', name: 'AWSèªè­‰', bonus: 7, description: 'Amazoné›²ç«¯æœå‹™èªè­‰' },
                    { id: 'itil', name: 'ITIL Foundation', bonus: 5, description: 'ITæœå‹™ç®¡ç†æœ€ä½³å¯¦å‹™' }
                ]
            }
        };

        let selectedCertifications = [];
        let assessmentData = {};
        let radarChart = null;

        // åˆå§‹åŒ–
        function init() {
            renderCertifications();
            renderAssessmentCategories();
        }

        // æ­¥é©Ÿåˆ‡æ›
        function goToStep(step) {
            // é©—è­‰
            if (step === 2) {
                const name = document.getElementById('personName').value.trim();
                if (!name) {
                    alert('è«‹è¼¸å…¥å§“åï¼');
                    return;
                }
            }

            if (step === 3) {
                // å¯é¸ï¼šé©—è­‰æ˜¯å¦é¸æ“‡è­‰ç…§
            }

            // æ›´æ–°æ­¥é©ŸæŒ‡ç¤ºå™¨
            for (let i = 1; i <= 4; i++) {
                const stepEl = document.getElementById(`step${i}`);
                const sectionEl = document.getElementById(`section${i}`);
                
                if (i < step) {
                    stepEl.classList.add('completed');
                    stepEl.classList.remove('active');
                } else if (i === step) {
                    stepEl.classList.add('active');
                    stepEl.classList.remove('completed');
                    sectionEl.classList.add('active');
                } else {
                    stepEl.classList.remove('active', 'completed');
                    sectionEl.classList.remove('active');
                }

                if (i !== step) {
                    sectionEl.classList.remove('active');
                }
            }

            // æ»¾å‹•åˆ°é ‚éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // æ¸²æŸ“è­‰ç…§åˆ—è¡¨
        function renderCertifications() {
            const container = document.getElementById('certificationList');
            container.innerHTML = '';

            Object.keys(certifications).forEach(categoryKey => {
                const category = certifications[categoryKey];
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'cert-category';
                
                let html = `<h3>${category.title}</h3>`;
                
                category.certs.forEach(cert => {
                    html += `
                        <div class="cert-item" onclick="toggleCert('${cert.id}', this)">
                            <input type="checkbox" id="cert-${cert.id}" onclick="event.stopPropagation()">
                            <div class="cert-info">
                                <div class="cert-name-row">
                                    <span class="cert-name">${cert.name}</span>
                                    <span class="cert-bonus">+${cert.bonus}åˆ†</span>
                                </div>
                                <div class="cert-desc">${cert.description}</div>
                            </div>
                        </div>
                    `;
                });
                
                categoryDiv.innerHTML = html;
                container.appendChild(categoryDiv);
            });
        }

        // åˆ‡æ›è­‰ç…§é¸æ“‡
        function toggleCert(certId, element) {
            const checkbox = document.getElementById(`cert-${certId}`);
            checkbox.checked = !checkbox.checked;
            
            if (checkbox.checked) {
                element.classList.add('selected');
                selectedCertifications.push(certId);
            } else {
                element.classList.remove('selected');
                const index = selectedCertifications.indexOf(certId);
                if (index > -1) {
                    selectedCertifications.splice(index, 1);
                }
            }

            updateCertSummary();
        }

        // æ›´æ–°è­‰ç…§æ‘˜è¦
        function updateCertSummary() {
            const summary = document.getElementById('certSummary');
            const list = document.getElementById('selectedCertsList');
            const bonusEl = document.getElementById('totalBonus');

            if (selectedCertifications.length === 0) {
                summary.style.display = 'none';
                return;
            }

            summary.style.display = 'block';

            let totalBonus = 0;
            let certNames = [];

            selectedCertifications.forEach(certId => {
                Object.keys(certifications).forEach(categoryKey => {
                    const cert = certifications[categoryKey].certs.find(c => c.id === certId);
                    if (cert) {
                        totalBonus += cert.bonus;
                        certNames.push(cert.name);
                    }
                });
            });

            list.innerHTML = certNames.join(', ');
            bonusEl.textContent = `+${totalBonus} åˆ†`;
        }

        // æ¸²æŸ“è©•åˆ†å€åŸŸ
        function renderAssessmentCategories() {
            const container = document.getElementById('assessmentCategories');
            container.innerHTML = '';

            categories.forEach((category, catIndex) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'category-block';
                
                let html = `<h3>${category.name}</h3>`;
                
                category.indicators.forEach((indicator, indIndex) => {
                    const key = `${catIndex}-${indIndex}`;
                    html += `
                        <div class="indicator-item">
                            <div class="indicator-header">
                                <span class="indicator-name">${indicator.name}</span>
                                <div class="info-icon" onclick="toggleInfo('${key}')">â“˜</div>
                            </div>
                            <div class="indicator-desc" id="desc-${key}">${indicator.description}</div>
                            <div class="score-buttons">
                                ${[1,2,3,4,5].map(score => 
                                    `<button class="score-btn" data-score="${score}" onclick="selectScore('${key}', ${score}, this)">${score}</button>`
                                ).join('')}
                            </div>
                        </div>
                    `;
                });
                
                categoryDiv.innerHTML = html;
                container.appendChild(categoryDiv);
            });
        }

        // åˆ‡æ›èªªæ˜é¡¯ç¤º
        function toggleInfo(key) {
            const desc = document.getElementById(`desc-${key}`);
            desc.classList.toggle('show');
        }

        // é¸æ“‡åˆ†æ•¸
        function selectScore(key, score, button) {
            // ç§»é™¤åŒçµ„çš„ active
            const parent = button.parentElement;
            parent.querySelectorAll('.score-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // æ·»åŠ  active
            button.classList.add('active');
            
            // å„²å­˜åˆ†æ•¸
            assessmentData[key] = score;
        }

        // è¨ˆç®—æˆ°é¬¥åŠ›
        function calculatePower() {
            const name = document.getElementById('personName').value.trim();

            // æª¢æŸ¥æ˜¯å¦æ‰€æœ‰é …ç›®éƒ½å·²è©•åˆ†
            let totalIndicators = 0;
            categories.forEach(cat => {
                totalIndicators += cat.indicators.length;
            });

            if (Object.keys(assessmentData).length < totalIndicators) {
                alert('è«‹å®Œæˆæ‰€æœ‰é …ç›®çš„è©•åˆ†ï¼');
                return;
            }

            // è¨ˆç®—åˆ†æ•¸
            let totalScore = 0;
            const categoryScores = [];

            categories.forEach((category, catIndex) => {
                let categorySum = 0;
                category.indicators.forEach((indicator, indIndex) => {
                    const key = `${catIndex}-${indIndex}`;
                    categorySum += assessmentData[key] || 0;
                });
                
                const categoryAvg = categorySum / category.indicators.length;
                const categoryWeighted = (categoryAvg / 5) * category.weight;
                totalScore += categoryWeighted;

                categoryScores.push({
                    name: category.name,
                    score: categoryAvg,
                    percentage: ((categoryAvg / 5) * 100).toFixed(1)
                });
            });

            // åŠ å…¥è­‰ç…§åŠ åˆ†
            let certBonus = 0;
            selectedCertifications.forEach(certId => {
                Object.keys(certifications).forEach(categoryKey => {
                    const cert = certifications[categoryKey].certs.find(c => c.id === certId);
                    if (cert) certBonus += cert.bonus;
                });
            });

            const finalScore = Math.min(100, totalScore + certBonus);

            // é¡¯ç¤ºçµæœ
            displayResult(name, finalScore, categoryScores, certBonus);
            goToStep(4);
        }

        // é¡¯ç¤ºçµæœ
        function displayResult(name, score, categoryScores, certBonus) {
            document.getElementById('resultTitle').textContent = `${name} çš„è©•ä¼°çµæœ`;
            document.getElementById('totalScore').textContent = score.toFixed(2);
            
            const level = getLevel(score);
            const badge = document.getElementById('levelBadge');
            badge.textContent = level;
            badge.style.background = getLevelColor(level);

            drawRadarChart(categoryScores);
        }

        // åˆ¤å®šç­‰ç´š
        function getLevel(score) {
            if (score >= 90) return 'Sç´š - å‚³å¥‡PM';
            if (score >= 85) return 'A+ç´š - å“è¶ŠPM';
            if (score >= 80) return 'Aç´š - å„ªç§€PM';
            if (score >= 75) return 'B+ç´š - è‰¯å¥½PM';
            if (score >= 70) return 'Bç´š - ç¨±è·PM';
            if (score >= 65) return 'C+ç´š - åˆæ ¼PM';
            if (score >= 60) return 'Cç´š - åŸºç¤PM';
            if (score >= 55) return 'Dç´š - æˆé•·ä¸­';
            if (score >= 50) return 'Eç´š - å…¥é–€è€…';
            return 'Fç´š - æ–°æ‰‹';
        }

        function getLevelColor(level) {
            if (level.startsWith('S')) return 'linear-gradient(135deg, #f5222d, #ff4d4f)';
            if (level.startsWith('A')) return 'linear-gradient(135deg, #faad14, #ffc53d)';
            if (level.startsWith('B')) return 'linear-gradient(135deg, #52c41a, #73d13d)';
            if (level.startsWith('C')) return 'linear-gradient(135deg, #1890ff, #40a9ff)';
            return 'linear-gradient(135deg, #8c8c8c, #bfbfbf)';
        }

        // ç¹ªè£½é›·é”åœ–
        function drawRadarChart(categoryScores) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            if (radarChart) {
                radarChart.destroy();
            }

            radarChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: categoryScores.map(c => c.name),
                    datasets: [{
                        label: 'èƒ½åŠ›åˆ†æ•¸',
                        data: categoryScores.map(c => c.score),
                        backgroundColor: 'rgba(74, 158, 255, 0.2)',
                        borderColor: '#4a9eff',
                        borderWidth: 2,
                        pointBackgroundColor: '#4a9eff',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#4a9eff',
                        pointRadius: 4,
                        pointHoverRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: true,
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 5,
                            min: 0,
                            ticks: {
                                stepSize: 1,
                                color: '#9ba3b4',
                                backdropColor: 'transparent',
                                font: { size: 10 }
                            },
                            grid: {
                                color: 'rgba(74, 158, 255, 0.1)'
                            },
                            pointLabels: {
                                color: '#e8eaf0',
                                font: {
                                    size: window.innerWidth < 480 ? 10 : 12,
                                    weight: '500'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // ä¸‹è¼‰å ±å‘Š
        function downloadReport() {
            const name = document.getElementById('personName').value.trim();
            const score = parseFloat(document.getElementById('totalScore').textContent);
            const level = document.getElementById('levelBadge').textContent;

            let report = `
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          PM POWER ASSESSMENT REPORT                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€åŸºæœ¬è³‡è¨Šã€‘
è©•ä¼°å°è±¡ï¼š${name}
è©•ä¼°æ—¥æœŸï¼š${new Date().toLocaleDateString('zh-TW')}
ç¸½æˆ°é¬¥åŠ›ï¼š${score.toFixed(2)} / 100
è©•ä¼°ç­‰ç´šï¼š${level}

ã€å…­å¤§èƒ½åŠ›åˆ†æã€‘
`;

            categories.forEach((cat, catIndex) => {
                let catScore = 0;
                cat.indicators.forEach((ind, indIndex) => {
                    const key = `${catIndex}-${indIndex}`;
                    catScore += assessmentData[key] || 0;
                });
                const avg = catScore / cat.indicators.length;
                report += `${cat.name}: ${avg.toFixed(2)}/5 (${((avg/5)*100).toFixed(1)}%)\n`;
            });

            if (selectedCertifications.length > 0) {
                report += `\nã€å·²å–å¾—è­‰ç…§ã€‘\n`;
                selectedCertifications.forEach(certId => {
                    Object.keys(certifications).forEach(categoryKey => {
                        const cert = certifications[categoryKey].certs.find(c => c.id === certId);
                        if (cert) {
                            report += `âœ“ ${cert.name} (+${cert.bonus}åˆ†)\n`;
                        }
                    });
                });
            }

            report += `
\nå ±å‘Šç”¢ç”Ÿæ™‚é–“ï¼š${new Date().toLocaleString('zh-TW')}
è©•ä¼°ç³»çµ±ç‰ˆæœ¬ï¼šMobile v2.0
            `;

            const blob = new Blob([report], { type: 'text/plain;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${name}_PMæˆ°é¬¥åŠ›è©•ä¼°_${new Date().toISOString().split('T')[0]}.txt`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // æŸ¥çœ‹è©³ç´°åˆ†æ
        function viewDetails() {
            alert('è©³ç´°åˆ†æåŠŸèƒ½é–‹ç™¼ä¸­...');
        }

        // é‡ç½®è©•ä¼°
        function resetAssessment() {
            if (confirm('ç¢ºå®šè¦é‡æ–°è©•ä¼°å—ï¼Ÿæ‰€æœ‰è³‡æ–™å°‡è¢«æ¸…é™¤ã€‚')) {
                document.getElementById('personName').value = '';
                selectedCertifications = [];
                assessmentData = {};
                
                // é‡ç½®è­‰ç…§é¸æ“‡
                document.querySelectorAll('.cert-item').forEach(item => {
                    item.classList.remove('selected');
                });
                document.querySelectorAll('.cert-item input[type="checkbox"]').forEach(cb => {
                    cb.checked = false;
                });

                // é‡ç½®è©•åˆ†æŒ‰éˆ•
                document.querySelectorAll('.score-btn').forEach(btn => {
                    btn.classList.remove('active');
                });

                goToStep(1);
            }
        }

        // åˆå§‹åŒ–
        window.onload = init;
    </script>
</body>
</html>
